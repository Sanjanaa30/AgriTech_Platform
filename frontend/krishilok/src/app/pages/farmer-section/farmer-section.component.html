<div *ngIf="section === 'my-crops'" class="p-6 text-gray-800">
    <!-- Header + Filter + Sort -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
        <!-- Add Crop Button -->
        <button (click)="showAddCropModal = true" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            ‚ûï Add Crop
        </button>

        <!-- Add Crop Modal -->
        <!-- Add Crop Modal -->
        <div *ngIf="showAddCropModal"
            class="fixed inset-0 z-50 bg-black bg-opacity-40 flex justify-center items-center">
            <div class="bg-white w-[95%] md:w-[600px] max-h-[90vh] overflow-y-auto p-6 rounded-lg shadow-xl relative">

                <button (click)="showAddCropModal = false"
                    class="absolute top-2 right-3 text-gray-600 hover:text-red-600 text-lg">‚úñ</button>

                <h2 class="text-xl font-semibold text-gray-800 mb-4">üå± Add New Crop</h2>

                <!-- Section A: Basic Info -->
                <div class="space-y-4">

                    <!-- Category Dropdown -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">üìÇ Category *</label>
                        <select class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.category"
                            (change)="onCategoryChange()">
                            <option value="">Select Category</option>
                            <option *ngFor="let cat of categories">{{ cat }}</option>
                        </select>
                    </div>

                    <!-- Crop Dropdown -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">üåæ Crop Name *</label>
                        <select class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.name"
                            (change)="onCropChange()">
                            <option value="">Select Crop</option>
                            <option *ngFor="let crop of cropOptions">{{ crop.NAME }}</option>
                        </select>
                    </div>

                    <!-- Season Badge -->
                    <div *ngIf="seasonBadge" class="mt-1">
                        <span class="inline-block bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">
                            üè∑Ô∏è {{ seasonBadge }}
                        </span>
                    </div>

                    <!-- Variety -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">üî§ Variety</label>
                        <select class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.variety">
                            <option value="">Select or type manually</option>
                            <option *ngFor="let v of varietyOptions">{{ v }}</option>
                        </select>
                        <input *ngIf="!varietyOptions.length" type="text" class="w-full mt-2 p-2 border rounded"
                            [(ngModel)]="newCrop.variety" placeholder="e.g., Roma, Basmati 1121" />
                    </div>

                    <!-- Sowing & Harvest Date -->
                    <div class="flex flex-col md:flex-row md:space-x-4">
                        <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700">üìÖ Sowing Date *</label>
                            <input type="date" class="w-full mt-1 p-2 border rounded"
                                [(ngModel)]="newCrop.sowingDate" />
                        </div>
                        <div class="flex-1 mt-4 md:mt-0">
                            <label class="block text-sm font-medium text-gray-700">üìÜ Expected Harvest *</label>
                            <input type="date" class="w-full mt-1 p-2 border rounded"
                                [(ngModel)]="newCrop.harvestDate" />
                        </div>
                    </div>

                    <!-- Image Upload -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">üñºÔ∏è Crop Image</label>
                        <input type="text" class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.imageUrl"
                            placeholder="Enter image URL for now" />
                    </div>

                    <!-- Status -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">‚öôÔ∏è Status *</label>
                        <select class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.status">
                            <option value="">Select Status</option>
                            <option>Sowing</option>
                            <option>Growing</option>
                            <option>Harvesting</option>
                            <option>Ready for Market</option>
                        </select>
                    </div>
                </div>

                <!-- Section B: Additional Info -->
                <hr class="my-6" />
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">üìê Area (acres) *</label>
                        <input type="number" class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.area" />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">üíß Irrigation Type *</label>
                        <select class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.irrigationType">
                            <option value="">Select Type</option>
                            <option>Drip</option>
                            <option>Sprinkler</option>
                            <option>Flood</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">üß† AI Health Score</label>
                            <input type="text" class="w-full mt-1 p-2 border rounded bg-gray-100" value="82 (Auto)"
                                disabled />
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">üõí Listed for Sale?</label>
                            <input type="text" class="w-full mt-1 p-2 border rounded bg-gray-100" value="Yes"
                                disabled />
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">üóíÔ∏è Last Activity</label>
                        <input type="text" class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.lastActivity"
                            placeholder="e.g., Fertilizer applied" />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">üßæ Notes History</label>
                        <textarea rows="3" class="w-full mt-1 p-2 border rounded" [(ngModel)]="newCrop.notes"
                            placeholder="Write notes..."></textarea>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="mt-6 text-right">
                    <button (click)="saveNewCrop()"
                        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                        ‚úÖ Save Crop
                    </button>
                </div>
            </div>
        </div>



        <!-- Filter + Sort Controls -->
        <div class="flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto">
            <!-- Filter by Status -->
            <select [(ngModel)]="filterStatus"
                class="border border-gray-300 rounded px-3 py-2 text-sm w-full sm:w-auto">
                <option value="">Filter by Status</option>
                <option value="Sowing">Sowing</option>
                <option value="Growing">Growing</option>
                <option value="Harvesting">Harvesting</option>
                <option value="Ready for Market">Ready for Market</option>
            </select>

            <!-- Sort By -->
            <select [(ngModel)]="sortBy" class="border border-gray-300 rounded px-3 py-2 text-sm w-full sm:w-auto">
                <option value="">Sort by</option>
                <option value="name">Name</option>
                <option value="sowingDate">Sowing Date</option>
                <option value="harvestDate">Harvest Date</option>
            </select>
        </div>
    </div>

    <!-- Crop Cards -->
    <div *ngFor="let crop of filteredCrops">
        <app-crop-card [crop]="crop" (edit)="editCrop($event)" (statusUpdate)="updateCropStatus($event)"
            (viewMore)="viewMoreDetails($event)" (delete)="deleteCrop($event)">
        </app-crop-card>
    </div>
</div>

<div *ngIf="section === 'ai-insights'">
    <!-- AI Insights content -->
</div>

<div *ngIf="section === 'marketplace'">
    <!-- Marketplace content -->
</div>

<!-- and so on -->